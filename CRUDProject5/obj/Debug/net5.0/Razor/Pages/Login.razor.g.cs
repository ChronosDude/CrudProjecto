#pragma checksum "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "98f2206922dda3c9b4629a166a67128831d147df"
// <auto-generated/>
#pragma warning disable 1591
namespace CRUDProject5.Pages
{
    #line hidden
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 2 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\_Imports.razor"
using CRUDProject5.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
using CRUDProject5.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
using Microsoft.Extensions.Logging;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
using System;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
using System.IO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
using Microsoft.AspNetCore.Hosting;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
using System.Text.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
using System.Net.Http.Headers;

#line default
#line hidden
#nullable disable
#nullable restore
#line 20 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
using Microsoft.AspNetCore.Builder;

#line default
#line hidden
#nullable disable
#nullable restore
#line 21 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
using Microsoft.Extensions.DependencyInjection;

#line default
#line hidden
#nullable disable
#nullable restore
#line 22 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
using CRUDProject5;

#line default
#line hidden
#nullable disable
#nullable restore
#line 23 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
using System.Security.Claims;

#line default
#line hidden
#nullable disable
#nullable restore
#line 24 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/login")]
    public partial class Login : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "main");
            __builder.AddAttribute(1, "class", "flex-shrink-0");
            __builder.OpenElement(2, "section");
            __builder.AddAttribute(3, "class", "py-5");
            __builder.OpenElement(4, "div");
            __builder.AddAttribute(5, "class", "container px-5");
            __builder.OpenElement(6, "div");
            __builder.AddAttribute(7, "class", "bg-light rounded-3 py-5 px-4 px-md-5 mb-5");
            __builder.OpenElement(8, "div");
            __builder.AddAttribute(9, "class", "text-center mb-5");
            __builder.AddMarkupContent(10, "<div class=\"feature bg-primary bg-gradient text-white rounded-3 mb-3\"><i class=\"bi bi-person-fill\"></i></div>\r\n                    ");
            __builder.AddMarkupContent(11, "<h1 class=\"fw-bolder\">Iniciar Sesi√≥n</h1>\r\n                    ");
            __builder.AddMarkupContent(12, "<p class=\"lead fw-normal text-muted mb-0\">Ingresa tus datos</p>");
#nullable restore
#line 42 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
                     if (mensa != null)
            {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(13, "p");
            __builder.AddAttribute(14, "class", "lead fw-normal text-danger mb-0");
            __builder.AddContent(15, 
#nullable restore
#line 44 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
                                                            mensa

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 45 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(16, "\r\n                ");
            __builder.OpenElement(17, "div");
            __builder.AddAttribute(18, "class", "row gx-5 justify-content-center");
            __builder.OpenElement(19, "div");
            __builder.AddAttribute(20, "class", "col-lg-8 col-xl-6");
            __builder.OpenComponent<Microsoft.AspNetCore.Components.Forms.EditForm>(21);
            __builder.AddAttribute(22, "Model", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Object>(
#nullable restore
#line 56 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
                                         ulogin

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(23, "OnValidSubmit", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Microsoft.AspNetCore.Components.Forms.EditContext>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Forms.EditContext>(this, 
#nullable restore
#line 56 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
                                                                 HandleValidSubmit

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(24, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Forms.EditContext>)((context) => (__builder2) => {
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Forms.DataAnnotationsValidator>(25);
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(26, "\r\n                            ");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Forms.ValidationSummary>(27);
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(28, "\r\n\r\n                            ");
                __builder2.OpenElement(29, "div");
                __builder2.AddAttribute(30, "class", "form-floating mb-3");
                __builder2.AddMarkupContent(31, "<label>\r\n                                    Usuario\r\n                                </label>\r\n                                    ");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Forms.InputText>(32);
                __builder2.AddAttribute(33, "id", "latitud");
                __builder2.AddAttribute(34, "class", "form-control");
                __builder2.AddAttribute(35, "Value", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 64 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
                                                                                               ulogin.UserName

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(36, "ValueChanged", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.String>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.String>(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => ulogin.UserName = __value, ulogin.UserName))));
                __builder2.AddAttribute(37, "ValueExpression", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Linq.Expressions.Expression<System.Func<System.String>>>(() => ulogin.UserName));
                __builder2.CloseComponent();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(38, "\r\n                            ");
                __builder2.OpenElement(39, "div");
                __builder2.AddAttribute(40, "class", "form-floating mb-3");
                __builder2.AddMarkupContent(41, "<label> Contrase√±a </label>\r\n                                    ");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Forms.InputText>(42);
                __builder2.AddAttribute(43, "type", "password");
                __builder2.AddAttribute(44, "id", "longitud");
                __builder2.AddAttribute(45, "class", "form-control");
                __builder2.AddAttribute(46, "Value", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 69 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
                                                                                                                ulogin.Password

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(47, "ValueChanged", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.String>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.String>(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => ulogin.Password = __value, ulogin.Password))));
                __builder2.AddAttribute(48, "ValueExpression", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Linq.Expressions.Expression<System.Func<System.String>>>(() => ulogin.Password));
                __builder2.CloseComponent();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(49, "\r\n\r\n\r\n                            ");
                __builder2.OpenElement(50, "div");
                __builder2.AddAttribute(51, "class", "d-grid");
                __builder2.OpenElement(52, "button");
                __builder2.AddAttribute(53, "type", "submit");
                __builder2.AddAttribute(54, "class", "btn btn-primary btn-lg ");
                __builder2.AddAttribute(55, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 74 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
                                                                                                                UserNEWLogin

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddMarkupContent(56, "Iniciar Sesi√≥n");
                __builder2.CloseElement();
                __builder2.CloseElement();
            }
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(57, "\r\n\r\n");
            __builder.AddMarkupContent(58, @"<footer class=""bg-dark py-4 mt-auto""><div class=""container px-5""><div class=""row align-items-center justify-content-between flex-column flex-sm-row""><div class=""col-auto""><div class=""small m-0 text-white"">Copyright &copy; Universidad Tecnol√≥gica Metropolitana 2022</div></div>
            <div class=""col-auto""><a class=""link-light small"" href=""#!"">Privacy</a>
                <span class=""text-white mx-1"">&middot;</span>
                <a class=""link-light small"" href=""#!"">Terms</a>
                <span class=""text-white mx-1"">&middot;</span>
                <a class=""link-light small"" href=""#!"">Contact</a></div></div></div></footer>");
        }
        #pragma warning restore 1998
#nullable restore
#line 103 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Login.razor"
       
    UserLogin ulogin = new UserLogin();
    UserLogin oRes = new UserLogin();
    Respuesta<Report> oResProduct = new Respuesta<Report>();
    public string Url = "api/login/Authenticate";

    private void HandleValidSubmit()
    {
        Logger.LogInformation("HandleValidSubmit called");


    }

    string mensa { get; set; }


    public string LoginMesssage { get; set; }
    ClaimsPrincipal claimsPrincipal;

    [CascadingParameter]
    private Task<AuthenticationState> authenticationStateTask { get; set; }




    private async Task UserNEWLogin()

    {

        var response = await Http.GetFromJsonAsync<UserLogin>($"api/login/Authenticate?username={ulogin.UserName}&pass={ulogin.Password}");
        //oRes = response.Content.ReadFromJsonAsync<UserLogin>().Result;

        if (response.Email!=null)
        {
            await localStorage.SetItemAsync("nombre", response.Name.ToString());
            await localStorage.SetItemAsync("Rol", response.Rolename.ToString());
            await localStorage.SetItemAsync("IdUserLoged", response.Id.ToString());


            Navegacion.NavigateTo("/",forceLoad:true);
        }
        else
        {
            mensa = "datos incorrectos";
            ulogin.UserName = "";
            ulogin.Password = "";
            Navegacion.NavigateTo("/login");
        }

        //await localStorage.SetItemAsync("nombre", response.Name.ToString());
        //await localStorage.SetItemAsync("Rol", response.Rolename.ToString());
        //await localStorage.SetItemAsync("IdUserLoged", response.Id.ToString());

        //await ((CustomAuthenticationStateProvider)AuthenticationStateProvider).MarkUserAsAuthenticated(response);






        //Navegacion.NavigateTo("/");


    }







#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IWebHostEnvironment Environment { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private AuthenticationStateProvider AuthenticationStateProvider { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private Blazored.LocalStorage.ILocalStorageService localStorage { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ILogger<NuevoReporte> Logger { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime _jsRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager Navegacion { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient Http { get; set; }
    }
}
#pragma warning restore 1591
