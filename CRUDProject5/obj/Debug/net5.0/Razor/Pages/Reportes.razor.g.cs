#pragma checksum "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Reportes.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "1623e1984d1588ca1cb0901b7416598b9826bfb8"
// <auto-generated/>
#pragma warning disable 1591
namespace CRUDProject5.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 2 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\_Imports.razor"
using CRUDProject5;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\_Imports.razor"
using CRUDProject5.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Reportes.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Reportes.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Reportes.razor"
using CRUDProject5.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Reportes.razor"
using Microsoft.Extensions.Logging;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/reportes")]
    public partial class Reportes : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "main");
            __builder.AddAttribute(1, "class", "flex-shrink-0");
            __builder.OpenElement(2, "section");
            __builder.AddAttribute(3, "class", "bg-light py-5");
            __builder.OpenElement(4, "div");
            __builder.AddAttribute(5, "class", "container px-5 my-5");
            __builder.AddMarkupContent(6, @"<div class=""text-center mb-5""><div class=""feature bg-primary bg-gradient text-white rounded-3 mb-3""><i class=""bi bi-list""></i></div>
                <h1 class=""fw-bolder"">Reportes realizados</h1>
                <p class=""lead fw-normal text-muted mb-0"">Una lista de los ultimos reportes realizados</p></div>



            <div id=""getmap"" style=""height:500px;width:100%;""></div>
            


            ");
            __builder.OpenElement(7, "div");
            __builder.AddAttribute(8, "class", "wrapper");
            __builder.OpenElement(9, "div");
            __builder.AddAttribute(10, "class", "cards_wrap");
#nullable restore
#line 80 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Reportes.razor"
                     if (oRespuesta != null && oRespuesta.Data != null)
                    {

                        

#line default
#line hidden
#nullable disable
#nullable restore
#line 83 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Reportes.razor"
                         foreach (var oElemento in (List<Report>)oRespuesta.Data)
                        {
                            var imageDataUrl = $"data:image/png;base64,{Convert.ToBase64String(oElemento.Foto)}";


#line default
#line hidden
#nullable disable
            __builder.OpenElement(11, "div");
            __builder.AddAttribute(12, "class", "card_item");
            __builder.OpenElement(13, "div");
            __builder.AddAttribute(14, "class", "card_inner");
            __builder.OpenElement(15, "div");
            __builder.AddAttribute(16, "class", "card_top");
            __builder.OpenElement(17, "img");
            __builder.AddAttribute(18, "src", 
#nullable restore
#line 90 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Reportes.razor"
                                                   imageDataUrl

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(19, "alt", "car");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(20, "\r\n                                    ");
            __builder.OpenElement(21, "div");
            __builder.AddAttribute(22, "class", "card_bottom");
            __builder.OpenElement(23, "div");
            __builder.AddAttribute(24, "class", "card_category");
            __builder.AddContent(25, 
#nullable restore
#line 94 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Reportes.razor"
                                             oElemento.Estatus

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(26, "\r\n                                        ");
            __builder.OpenElement(27, "div");
            __builder.AddAttribute(28, "class", "card_info");
            __builder.OpenElement(29, "p");
            __builder.AddAttribute(30, "class", "title");
            __builder.AddContent(31, 
#nullable restore
#line 97 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Reportes.razor"
                                                              oElemento.Asunto

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(32, "\r\n                                            ");
            __builder.OpenElement(33, "p");
            __builder.AddContent(34, 
#nullable restore
#line 99 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Reportes.razor"
                                                 oElemento.Descripcion

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(35, "\r\n                                        ");
            __builder.OpenElement(36, "div");
            __builder.AddAttribute(37, "class", "card_creator");
            __builder.AddContent(38, 
#nullable restore
#line 103 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Reportes.razor"
                                             oElemento.User

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(39, "\r\n                                        ");
            __builder.OpenElement(40, "div");
            __builder.OpenElement(41, "button");
            __builder.AddAttribute(42, "class", "btn btn-info");
            __builder.AddAttribute(43, "onclick", "window.location.href" + " =" + " \'/editdelete/" + (
#nullable restore
#line 107 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Reportes.razor"
                                                                                                  oElemento.Id

#line default
#line hidden
#nullable disable
            ) + "\';");
            __builder.AddMarkupContent(44, "\r\n                                                Editar\r\n                                                <i class=\"bi bi-person-fill\"></i>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 115 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Reportes.razor"



                        }

#line default
#line hidden
#nullable disable
#nullable restore
#line 118 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Reportes.razor"
                         
                    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(45, "\r\n\r\n");
            __builder.AddMarkupContent(46, @"<footer class=""bg-dark py-4 mt-auto""><div class=""container px-5""><div class=""row align-items-center justify-content-between flex-column flex-sm-row""><div class=""col-auto""><div class=""small m-0 text-white"">Copyright &copy; Universidad Tecnol√≥gica Metropolitana 2022</div></div>
            <div class=""col-auto""><a class=""link-light small"" href=""#!"">Privacy</a>
                <span class=""text-white mx-1"">&middot;</span>
                <a class=""link-light small"" href=""#!"">Terms</a>
                <span class=""text-white mx-1"">&middot;</span>
                <a class=""link-light small"" href=""#!"">Contact</a></div></div></div></footer>");
        }
        #pragma warning restore 1998
#nullable restore
#line 157 "C:\Users\jimmy\source\repos\CRUDProject5\CRUDProject5\Pages\Reportes.razor"
       
    public string Url = "/api/report";
    public string msg { get; set; }

    public string userloged { get; set; }
    public string roleloged { get; set; }
    public string nameloged { get; set; }

    public Data.Respuesta<List<Report>> oRespuesta = new Data.Respuesta<List<Report>>();


    protected override async Task OnInitializedAsync()
    {

        userloged = await localStorage.GetItemAsync<string>("IdUserLoged");
        roleloged = await localStorage.GetItemAsync<string>("Rol");
        nameloged = await localStorage.GetItemAsync<string>("nombre");

        if (roleloged == "Master" || roleloged == "Administrator")
        {
            oRespuesta = await Http.GetFromJsonAsync<Respuesta<List<Report>>>(Url);
        }
        if (roleloged == "Client")
        {
            oRespuesta = await Http.GetFromJsonAsync<Respuesta<List<Report>>>(Url + $"/GetAllByUser?uid={userloged}");
        }

    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {


        if (firstRender)
        {
            userloged = await localStorage.GetItemAsync<string>("IdUserLoged");
            roleloged = await localStorage.GetItemAsync<string>("Rol");
            nameloged = await localStorage.GetItemAsync<string>("nombre");
            if (roleloged == "Master" || roleloged == "Administrator")
            {
                oRespuesta = await Http.GetFromJsonAsync<Respuesta<List<Report>>>(Url);
            }
            if (roleloged == "Client")
            {
                oRespuesta = await Http.GetFromJsonAsync<Respuesta<List<Report>>>(Url + $"/GetAllByUser?uid={userloged}");
            }

            
            await _jsRuntime.InvokeVoidAsync("getMap", oRespuesta.Data.ToList());

        }
    }




#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager Navegacion { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private Blazored.LocalStorage.ILocalStorageService localStorage { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ILogger<Reportes> Logger { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime _jsRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient Http { get; set; }
    }
}
#pragma warning restore 1591
